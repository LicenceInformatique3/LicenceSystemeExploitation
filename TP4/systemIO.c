#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "process.h"
#include "systemIO.h"

char buffer = SYSTEM_IO_EMPTY_BUFFER; /* le ’\0’ indique le vide */

int system_io_buffer_is_empty(){
	return (buffer == SYSTEM_IO_EMPTY_BUFFER);
}

char system_io_getChar(Process * process){
	if(system_io_buffer_is_empty()){
		process->state = GETCHAR;
	}
	return buffer;
}

void system_io_on_input(char c){
    process_wake_all_by_state(GETCHAR);
    buffer = c;
}

void system_io_fake_input(){
	char c = 'a';  
    system_io_on_input(c);
}
